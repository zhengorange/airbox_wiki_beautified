
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      <link rel="icon" href="images/sophgo.png">
      <meta name="generator" content="mkdocs-1.5.2, mkdocs-material-9.1.21">
    
    
      
        <title>Tutorial - text-generation-webui - Sophon Airbox Generative AI Lab</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.eebd395e.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.ecc896b0.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="css/colors.css">
    
      <link rel="stylesheet" href="css/extra.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="playful-purple" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#tutorial-text-generation-webui" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="index.html" title="Sophon Airbox Generative AI Lab" class="md-header__button md-logo" aria-label="Sophon Airbox Generative AI Lab" data-md-component="logo">
      
  <img src="images/sophgo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Sophon Airbox Generative AI Lab
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Tutorial - text-generation-webui
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
          
            
            
            
            <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="playful-purple" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-hidden="true"  type="radio" name="__palette" id="__palette_1">
            
          
        </form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="index.html" class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="airbox/index.html" class="md-tabs__link">
        Tutorials
      </a>
    </li>
  

      
        
  
  


  <li class="md-tabs__item">
    <a href="benchmarks.html" class="md-tabs__link">
      Benchmarks
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="try.html" class="md-tabs__link">
      Try
    </a>
  </li>

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="Sophon Airbox Generative AI Lab" class="md-nav__button md-logo" aria-label="Sophon Airbox Generative AI Lab" data-md-component="logo">
      
  <img src="images/sophgo.png" alt="logo">

    </a>
    Sophon Airbox Generative AI Lab
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          Tutorials
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Tutorials
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="airbox/index.html" class="md-nav__link">
        ÂºÄÂßã
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="airbox/%E5%87%86%E5%A4%87.html" class="md-nav__link">
        ÂáÜÂ§á
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="airbox/AirBox%E8%BF%9E%E6%8E%A5%E6%96%B9%E5%BC%8F.html" class="md-nav__link">
        AirBoxËøûÊé•ÊñπÂºè
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="airbox/%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83%E4%BD%BF%E7%94%A8.html" class="md-nav__link">
        ËôöÊãüÁéØÂ¢É‰ΩøÁî®
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_5" >
      
      
      
        <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
          Â§ßÊ®°ÂûãÂ∫îÁî®
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_5">
          <span class="md-nav__icon md-icon"></span>
          Â§ßÊ®°ÂûãÂ∫îÁî®
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="airbox/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8/ChatBot%E5%AE%89%E8%A3%85.html" class="md-nav__link">
        ChatBotÂÆâË£Ö
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="airbox/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8/ChatBot%E6%93%8D%E4%BD%9C%E8%AF%B4%E6%98%8E.html" class="md-nav__link">
        ChatBotÊìç‰ΩúËØ¥Êòé
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="airbox/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8/ChatDoc%E5%AE%89%E8%A3%85.html" class="md-nav__link">
        ChatDocÂÆâË£Ö
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="airbox/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8/ChatDoc%E6%93%8D%E4%BD%9C%E8%AF%B4%E6%98%8E.html" class="md-nav__link">
        ChatDocÊìç‰ΩúËØ¥Êòé
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="airbox/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8/ChatDoc%20API%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E.html" class="md-nav__link">
        ChatDoc API‰ΩøÁî®ËØ¥Êòé
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="airbox/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8/%E6%95%99%E8%82%B2%E5%BA%94%E7%94%A8demo.html" class="md-nav__link">
        ÊïôËÇ≤Â∫îÁî®demo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="airbox/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E5%BA%94%E7%94%A8/%E6%A8%A1%E5%9E%8B%E8%B0%83%E7%94%A8%E8%AF%A6%E6%83%85.html" class="md-nav__link">
        Ê®°ÂûãË∞ÉÁî®ËØ¶ÊÉÖ
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_6" >
      
      
      
        <label class="md-nav__link" for="__nav_2_6" id="__nav_2_6_label" tabindex="0">
          AIÁªòÁîªÂ∫îÁî®
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_6">
          <span class="md-nav__icon md-icon"></span>
          AIÁªòÁîªÂ∫îÁî®
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="airbox/AI%E7%BB%98%E7%94%BB%E5%BA%94%E7%94%A8/SD%20v15%E5%AE%89%E8%A3%85%E5%90%AF%E5%8A%A8.html" class="md-nav__link">
        SD v15ÂÆâË£ÖÂêØÂä®
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_7" >
      
      
      
        <label class="md-nav__link" for="__nav_2_7" id="__nav_2_7_label" tabindex="0">
          Êô∫ËÉΩËØ≠Èü≥Â∫îÁî®
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_7">
          <span class="md-nav__icon md-icon"></span>
          Êô∫ËÉΩËØ≠Èü≥Â∫îÁî®
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="airbox/%E6%99%BA%E8%83%BD%E8%AF%AD%E9%9F%B3%E5%BA%94%E7%94%A8/%E8%AF%AD%E9%9F%B3%E6%91%98%E8%A6%81.html" class="md-nav__link">
        ËØ≠Èü≥ÊëòË¶Å
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="benchmarks.html" class="md-nav__link">
        Benchmarks
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="try.html" class="md-nav__link">
        Try
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#set-up-a-container-for-text-generation-webui" class="md-nav__link">
    Set up a container for text-generation-webui
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-start" class="md-nav__link">
    How to start
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#download-a-model-on-web-ui" class="md-nav__link">
    Download a model on web UI
  </a>
  
    <nav class="md-nav" aria-label="Download a model on web UI">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gguf-models" class="md-nav__link">
    GGUF models
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#model-selection-for-jetson-orin-nano" class="md-nav__link">
    Model selection for Jetson Orin Nano
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#load-a-model" class="md-nav__link">
    Load a model
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#chat-template" class="md-nav__link">
    Chat Template
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#results" class="md-nav__link">
    Results
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#things-to-do-with-your-llm" class="md-nav__link">
    Things to do with your LLM
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model-size-tested" class="md-nav__link">
    Model size tested
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="tutorial-text-generation-webui">Tutorial - text-generation-webui</h1>
<p>Interact with a local AI assistant by running a LLM with oobabooga's <a href="https://github.com/oobabooga/text-generation-webui"><code>text-generaton-webui</code></a> on NVIDIA Jetson!</p>
<p><img alt="" src="images/text-generation-webui_sf-trip.gif" /></p>
<div class="admonition abstract">
<p class="admonition-title">What you need</p>
<ol>
<li>
<p>One of the following Jetson:</p>
<p><span class="blobDarkGreen4">Jetson AGX Orin 64GB</span>
<span class="blobDarkGreen5">Jetson AGX Orin (32GB)</span>
<span class="blobLightGreen4">Jetson Orin Nano Orin (8GB)</span>‚ö†Ô∏è<sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup></p>
</li>
<li>
<p>Running one of the following <a href="https://developer.nvidia.com/embedded/jetpack">JetPack.5x</a></p>
<p><span class="blobPink1">JetPack 5.1.2 (L4T r35.4.1)</span>
<span class="blobPink2">JetPack 5.1.1 (L4T r35.3.1)</span>
<span class="blobPink3">JetPack 5.1 (L4T r35.2.1)</span></p>
</li>
<li>
<p>Sufficient storage space (preferably with NVMe SSD).</p>
<ul>
<li><code>6.2GB</code> for container image</li>
<li>Spaces for models</li>
</ul>
</li>
</ol>
</div>
<h2 id="set-up-a-container-for-text-generation-webui">Set up a container for text-generation-webui</h2>
<p>The jetson-containers project provides pre-built Docker images for <a href="https://github.com/dusty-nv/jetson-containers/tree/master/packages/llm/text-generation-webui"><code>text-generation-webui</code></a> along with all of the loader API's built with CUDA enabled (llama.cpp, ExLlama, AutoGPTQ, Transformers, ect).  You can clone the repo to use its utilities that will automatically pull/start the correct container for you, or you can do it <a href="https://github.com/dusty-nv/jetson-containers/tree/master/packages/llm/text-generation-webui#user-content-run">manually</a>.</p>
<div class="highlight"><pre><span></span><code>git clone --depth=1 https://github.com/dusty-nv/jetson-containers
cd jetson-containers
sudo apt update; sudo apt install -y python3-pip
pip3 install -r requirements.txt
</code></pre></div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p><strong>JetsonHacks</strong> provides an informative walkthrough video on <a href="https://github.com/dusty-nv/jetson-containers"><code>jetson-containers</code></a>, showcasing the usage of both the <a href="https://github.com/dusty-nv/jetson-containers/tree/master/packages/diffusion/stable-diffusion-webui"><code>stable-diffusion-webui</code></a> and <a href="https://github.com/dusty-nv/jetson-containers/tree/master/packages/llm/text-generation-webui"><code>text-generation-webui</code></a> containers.  You can find the complete article with detailed instructions <a href="https://jetsonhacks.com/2023/09/04/use-these-jetson-docker-containers-tutorial/">here</a>.</p>
<p><iframe width="720" height="405" src="https://www.youtube.com/embed/HlH3QkS1F5Y" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe></p>
</div>
<h2 id="how-to-start">How to start</h2>
<blockquote>
<p>If you are running this for the first time, go through the <a href="https://github.com/dusty-nv/jetson-containers/blob/master/docs/setup.md">pre-setup</a> and see the <a href="https://github.com/dusty-nv/jetson-containers/blob/master/packages/llm/text-generation-webui/README.md"><code>jetson-containers/text-generation-webui</code></a> container readme.</p>
</blockquote>
<p>Use <code>run.sh</code> and <code>autotag</code> script to automatically pull or build a compatible container image:</p>
<div class="highlight"><pre><span></span><code>cd jetson-containers
./run.sh $(./autotag text-generation-webui)
</code></pre></div>
<p>The container has a default run command (<code>CMD</code>) that will automatically start the webserver like this:</p>
<div class="highlight"><pre><span></span><code>cd /opt/text-generation-webui &amp;&amp; python3 server.py \
  --model-dir=/data/models/text-generation-webui \
  --chat \
  --listen
</code></pre></div>
<p>Open your browser and access <code>http://&lt;IP_ADDRESS&gt;:7860</code>.</p>
<h2 id="download-a-model-on-web-ui">Download a model on web UI</h2>
<p>See the <a href="https://github.com/oobabooga/text-generation-webui/tree/main#downloading-models">oobabooga documentation</a> for instructions for downloading models - either from within the web UI, or using <a href="https://github.com/oobabooga/text-generation-webui/blob/main/download-model.py"><code>download-model.py</code></a></p>
<div class="highlight"><pre><span></span><code>./run.sh<span class="w"> </span>--workdir<span class="o">=</span>/opt/text-generation-webui<span class="w"> </span><span class="k">$(</span>./autotag<span class="w"> </span>text-generation-webui<span class="k">)</span><span class="w"> </span>/bin/bash<span class="w"> </span>-c<span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="s1">&#39;python3 download-model.py --output=/data/models/text-generation-webui TheBloke/Llama-2-7b-Chat-GPTQ&#39;</span>
</code></pre></div>
<p>From within the web UI, select <strong>Model</strong> tab and navigate to "<strong>Download model or LoRA</strong>" section.  </p>
<p>You can find text generation models on <a href="https://huggingface.co/models?pipeline_tag=text-generation&amp;sort=trending">Hugging Face Hub</a>, then enter the Hugging Face username/model path (which you can have copied to your clipboard from the Hub).  Then click the <strong>Download</strong> button.</p>
<h3 id="gguf-models">GGUF models</h3>
<p>The fastest oobabooga model loader to use is currently <a href="https://github.com/dusty-nv/jetson-containers/blob/dev/packages/llm/llama_cpp">llama.cpp</a> with 4-bit quantized GGUF models.</p>
<p>You can download a single model file for a particular quantization, like <code>*.Q4_K_M.bin</code>. Input the file name and hit <strong>Download</strong> button.</p>
<table>
<thead>
<tr>
<th>Model</th>
<th style="text-align: center;">Quantization</th>
<th style="text-align: center;">Memory (MB)</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://huggingface.co/TheBloke/Llama-2-7b-Chat-GGUF"><code>TheBloke/Llama-2-7b-Chat-GGUF</code></a></td>
<td style="text-align: center;"><code>llama-2-7b-chat.Q4_K_M.gguf</code></td>
<td style="text-align: center;">5,268</td>
</tr>
<tr>
<td><a href="https://huggingface.co/TheBloke/Llama-2-13B-chat-GGUF"><code>TheBloke/Llama-2-13B-chat-GGUF</code></a></td>
<td style="text-align: center;"><code>llama-2-13b-chat.Q4_K_M.gguf</code></td>
<td style="text-align: center;">8,609</td>
</tr>
<tr>
<td><a href="https://huggingface.co/TheBloke/LLaMA-30b-GGUF"><code>TheBloke/LLaMA-30b-GGUF</code></a></td>
<td style="text-align: center;"><code>llama-30b.Q4_K_S.gguf</code></td>
<td style="text-align: center;">19,045</td>
</tr>
<tr>
<td><a href="https://huggingface.co/TheBloke/Llama-2-70b-Chat-GGUF"><code>TheBloke/Llama-2-70B-chat-GGUF</code></a></td>
<td style="text-align: center;"><code>llama-2-70b-chat.Q4_K_M.gguf</code></td>
<td style="text-align: center;">37,655</td>
</tr>
</tbody>
</table>
<p><img alt="" src="images/tgwui_model-download-animation.gif" /></p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<h3 id="model-selection-for-jetson-orin-nano">Model selection for Jetson Orin Nano</h3>
<p><span class="blobLightGreen4">Jetson Orin Nano Developer Kit</span> has only 8GB RAM for both CPU (system) and GPU, so you need to pick a model that fits in the RAM size - see the <a href="#model-size-tested">Model Size</a> section below.  The 7B models with 4-bit quantization are the ones to use on Jetson Orin Nano.  Make sure you go through the <a href="tips_ram-optimization.html">RAM optimization</a> steps before attempting to load such model on Jetson Orin Nano.</p>
</div>
<h2 id="load-a-model">Load a model</h2>
<p>After you have downloaded a model, click the üîÑ button to refresh your model list, and select the model you want to use.</p>
<p>For a GGUF model, remember to</p>
<ul>
<li>Set <code>n-gpu-layers</code> to <code>128</code></li>
<li>Set <code>n_gqa</code> to <code>8</code> if you using Llama-2-70B (on Jetson AGX Orin 64GB)</li>
</ul>
<p>Then click the <strong>Load</strong> button.</p>
<h2 id="chat-template">Chat Template</h2>
<p>If you're using a Llama model fine-tuned for chat, like the models listed above (except for <code>LLaMA-30b</code>), you need to use the oobabooga Instruct mode and set the template.  On the <strong>Parameters</strong> tab, go to the <strong>Instruction Template</strong> sub-tab, then select <code>Llama-v2</code> from the <strong>Instruction Template</strong> drop-down (or Vicuna, Guanaco, ect if you are using one of those models)  </p>
<div class="admonition tip">
<p>For the base text completion models (like <code>LLaMA-30b</code>), use the Default or Notebook tab.</p>
</div>
<p>Selecting the right chat template will make sure the model is being <a href="https://huggingface.co/blog/llama2#how-to-prompt-llama-2">prompted correctly</a> - you can also change the system prompt in the <strong>Context</strong> box to alter the agent's personality and behavior.  There are a lot of other settings under the <strong>Generation</strong> tab, like the maximum length it should output per reply, and token sampling parameters like <a href="https://medium.com/@dixnjakindah/top-p-temperature-and-other-parameters-1a53d2f8d7d7"><code>temperature</code> and <code>top_p</code></a> for controlling randomness.</p>
<p>Then change back to the <strong>Chat</strong> tab, and under the mode section, make sure <strong>Instruct</strong> is selected (confusingly, not chat mode).  Then you can start chatting with the LLM!</p>
<h2 id="results">Results</h2>
<p><img alt="" src="images/text-generation-webui_sf-trip.gif" /></p>
<h2 id="things-to-do-with-your-llm">Things to do with your LLM</h2>
<p><a href="https://modal.com/docs/guide/ex/vllm_inference#run-the-model">Here</a> are some common test prompts for coding, math, history ect.  You can also ask it about geography, travel, nature, recipies, fixing things, general life advice, and practically everything else.  Also Llama-2 is quite playful and likes to play games to test its logic abilities!</p>
<div class="highlight"><pre><span></span><code>&gt;&gt; What games do you like to play?

I&#39;m a large language model, so I can play text-based games and answer questions on a wide variety of topics. Here are some game ideas:

- 20 Questions:  You or I can think of an object, and the other player tries to guess what it is by asking up to 20 yes-or-no questions.  The goal is to guess the object in as few questions as possible.
- Hangman: I can think of a word or phrase and you try to guess it by suggesting letters. Each incorrect guess will bring the hangman one step closer to being complete!
- Word association: I&#39;ll give you a word and you have to come up with a word that is related to it. We can keep playing back and forth as long as you&#39;d like!
- Trivia: I can provide questions on a wide range of topics, from history to science to pop culture. See how many questions you can answer correctly!
- Storytelling: I can start telling a story and then stop at a cliffhanger. You can then try to guess what happens next or even take over the storytelling and continue it in your own
- Jokes: I love to tell jokes and make people laugh with my &quot;Dad humor&quot;!  Knock knock!  *giggles*
</code></pre></div>
<h2 id="model-size-tested">Model size tested</h2>
<p>With llama.cpp, GGUF model, 4-bit quantization:</p>
<table>
<thead>
<tr>
<th style="text-align: right;">Model size</th>
<th style="text-align: center;">Jetson AGX Orin 64GB</th>
<th style="text-align: center;">Jetson AGX Orin 32GB</th>
<th style="text-align: center;">Jetson Orin Nano 8GB</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: right;">70B model</td>
<td style="text-align: center;">‚úÖ</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td style="text-align: right;">30B model</td>
<td style="text-align: center;">‚úÖ</td>
<td style="text-align: center;">‚úÖ</td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td style="text-align: right;">13B model</td>
<td style="text-align: center;">‚úÖ</td>
<td style="text-align: center;">‚úÖ</td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td style="text-align: right;">7B model</td>
<td style="text-align: center;">‚úÖ</td>
<td style="text-align: center;">‚úÖ</td>
<td style="text-align: center;">‚úÖ</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p><strong>Want to explore using Python APIs to run LLMs directly? <br>
See <a href="https://github.com/dusty-nv/jetson-containers/tree/master/packages/llm"><code>jetson-containers</code></a> for its LLM related packages and containers.</strong></p>
</div>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p>Limited to 7B model (4-bit quantized).&#160;<a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
</ol>
</div>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": ".", "features": ["navigation.expand", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "content.tabs.link", "content.code.copy"], "search": "assets/javascripts/workers/search.74e28a9f.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.220ee61c.min.js"></script>
      
    
  </body>
</html>